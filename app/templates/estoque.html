{% extends 'base.html' %}
{% block title %}Estoque{% endblock %}
{% block content %}
<section class="hero settings-hero">
    <div>
        <p class="eyebrow">Gest√£o de insumos</p>
        <h1>Estoque da cozinha</h1>
        <p>Mantenha o estoque alinhado com o visual da Petzoo e registre os itens essenciais da opera√ß√£o.</p>
    </div>
    <div class="hero-card">
        <p class="muted">A√ß√µes r√°pidas</p>
        <a class="btn primary" href="{{ url_for('main.novo_item') }}">‚ûï Novo item</a>
    </div>
</section>

<article class="card table-card">
    <header class="table-header">
        <div>
            <p class="eyebrow">Itens cadastrados</p>
            <h3>Controle de estoque</h3>
        </div>
        <a class="btn ghost" href="{{ url_for('main.novo_item') }}">Adicionar item</a>
    </header>
    <div class="table-wrapper">
        <table class="data-table">
            <thead>
                <tr>
                    <th>Nome</th>
                    <th>Categoria</th>
                    <th>Unidade</th>
                    <th>Estoque atual</th>
                    <th>Estoque m√≠nimo</th>
                    <th>Observa√ß√µes</th>
                    <th class="actions-col">A√ß√µes</th>
                </tr>
            </thead>
            <tbody>
                {% if items %}
                    {% for item in items %}
                       <tr class="{% if item.estoque_atual < item.estoque_minimo %}low-stock{% endif %}">
    <td>{{ item.nome }}</td>
    <td>{{ item.categoria or '-' }}</td>
    <td>{{ item.unidade or '-' }}</td>

    <td>
        {% if item.estoque_atual < item.estoque_minimo %}
            <span style="color: red; font-weight: bold;">
                {{ item.estoque_atual }}
            </span>
        {% else %}
            {{ item.estoque_atual }}
        {% endif %}
    </td>

    <td>{{ item.estoque_minimo }}</td>

    <td class="muted">{{ item.observacoes or '-' }}</td>

    <td>
        <div class="table-actions">
            <a class="btn ghost small" href="{{ url_for('main.editar_item', item_id=item.id) }}">‚úèÔ∏è Editar</a>
            <form method="post" action="{{ url_for('main.deletar_item', item_id=item.id) }}" onsubmit="return confirm('Deseja remover este item?');">
                <button type="submit" class="btn danger small">üóëÔ∏è Apagar</button>
            </form>
        </div>
    </td>
</tr>


                           <td class="muted">{{ item.estoque_minimo }}</td>

                            <td class="muted">{{ item.observacoes or '-' }}</td>
                            <td>
                                <div class="table-actions">
                                    <a class="btn ghost small" href="{{ url_for('main.editar_item', item_id=item.id) }}">‚úèÔ∏è Editar</a>
                                    <form method="post" action="{{ url_for('main.deletar_item', item_id=item.id) }}" onsubmit="return confirm('Deseja remover este item?');">
                                        <button type="submit" class="btn danger small">üóëÔ∏è Apagar</button>
                                    </form>
                                </div>
                            </td>
                        </tr>
                    {% endfor %}
                {% else %}
                    <tr>
                        <td colspan="7" class="empty-state">Nenhum item cadastrado ainda.</td>
                    </tr>
                {% endif %}
            </tbody>
        </table>
    </div>
</article>
<style>
    .low-stock {
        background-color: #ffdddd !important;
    }
</style>

{% endblock %}
